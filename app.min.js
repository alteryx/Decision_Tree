/* Data Items to Initialize */
var itemsToInitialize = {
  curPage: "Home",
  curTab: "model",
  curToggle: "toggle-main",
};

var radioItems = {
  surrogate_use: ['usesurrogate.0', 'usesurrogate.1', 'usesurrogate.2'], 
  splitting_criteria: ['use.gini', 'use.information'],
  surrogate_split_criteria: ['total.correct' , 'percent.correct']
}

var toggleBarItems = {
  model_type: ['auto', 'classification', 'regression'],
  tree_summary: ["Counts", "Proportions"],
  tree_plot_size: ["tree.inches", "tree.centimeters"],
  pruning_plot_size: ["prune.inches", "prune.centimeters"]
};

var displayRules = {
  'div-use.weights': 'use.weights',
  'div-use.weights2': 'use.weights',
  'div-tree.plot': 'tree.plot',
  'div-prune.plot': 'prune.plot',
  'div-treeplot-in': ['tree_plot_size', 'tree.inches'],
  'div-treeplot-cm': ['tree_plot_size', 'tree.centimeters'],
  'div-pruneplot-in': ['pruning_plot_size', 'prune.inches'],
  'div-pruneplot-cm': ['pruning_plot_size', 'prune.centimeters'],
  'div-cp': 'set_cp',
  'show-for-classification': ['model_type', 'classification'],
  'show-on-rules': 'rules',
  'show-on-bandscheck': 'bands_check',
  'tabpage-model-rpart': ['model.algorithm', 'rpart'],
  'tabpage-model-c50': ['model.algorithm', 'C5.0']
};

Alteryx.Gui.BeforeLoad = function(manager, AlteryxDataItems){
  console.log("Before Load ----");
  var dataItem = makeDataItem(manager, AlteryxDataItems);
  initializeDataItems(dataItem, itemsToInitialize);
  initializeRadioItems(dataItem, radioItems);
  initializeToggleBarItems(dataItem, toggleBarItems);
  dataItem('Model Name', {value: getDefaultModelName()});
};

Alteryx.Gui.AfterLoad = function(manager){
  console.log("After Load ----");
  makeFieldMap('X Vars', ['numeric', 'string']);
  activateDisplayRules(displayRules);
  Object.keys(radioItems).forEach(syncRadio);
  Object.keys(toggleBarItems).forEach(setupToggleBar);
  setupPages()
};

Alteryx.Gui.Annotation = function(manager){
  return manager.GetDataItemByDataName("Model Name").value;
};
